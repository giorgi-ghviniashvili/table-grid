{"version":3,"file":"table-grid.min.js","sources":["../src/scripts/DataStore.js","../src/scripts/Table.js"],"sourcesContent":["class DataStore {\n  constructor(data, pageSize = 10) {\n    this.all_data = data.slice(); // all rows\n    this.filtered_data = data.slice(); // filtered data\n\n    this.rows_shown = pageSize;\n    this.page_size = pageSize;\n  }\n\n  filter(fn) {\n    const truth = () => true;\n    this.filtered_data = this.all_data.filter(fn || truth);\n    return this.currentData;\n  }\n\n  sort(fn) {\n    this.filtered_data.sort((a, b) => {\n      return fn(a, b);\n    });\n    return this.currentData;\n  }\n\n  nextPage() {\n    this.rows_shown += this.page_size;\n    return this.currentData;\n  }\n\n  collapse() {\n    this.rows_shown = this.page_size;\n    return this.currentData;\n  }\n\n  set pageSize(size) {\n    this.page_size = size;\n    this.rows_shown = size;\n  }\n\n  get currentData() {\n    return this.filtered_data.slice(0, this.rows_shown);\n  }\n\n  get onlyOnePage() {\n    return this.filtered_data <= this.page_size;\n  }\n}\n\nexport default DataStore;","import { selection, select } from \"d3-selection\";\nimport { groups } from \"d3-array\";\nimport DataStore from \"./DataStore\";\n\nconst d3 = {selection, select, groups};\n\nconst getMobileBreakdown = () => {\n  const viewport = window.innerWidth;\n\n  if (viewport <= 576) {\n    return \"xs\";\n  } else if (viewport <= 768) {\n    return \"sm\";\n  } else if (viewport <= 992) {\n    return \"md\";\n  } else if (viewport <= 1200) {\n    return \"lg\";\n  } else {\n    return \"rest\";\n  }\n};\n\nfunction Table(params) {\n  init_patternify();\n\n  const attrs = Object.assign(\n    {\n      id: Math.floor(Math.random() * 10000000),\n      container: \"body\",\n      data: [], // all data\n      headers: [], // column configs\n      cellHeight: 60, // height of each cells in table body\n      firstColumnWidth: {\n        // city column width (varies based on screen size),\n        xs: 140,\n        sm: 130,\n        md: 145,\n        lg: 160,\n        rest: 175,\n      },\n      pageSize: {\n        // show\n        xs: 6,\n        sm: 10,\n        md: 10,\n        lg: 10,\n        rest: 12,\n      },\n      numOfColumnsMobile: {\n        xs: 2,\n        sm: 3,\n        md: 8,\n        lg: 10,\n        rest: 12,\n      },\n      mobileBreakdown: \"xs\",\n      pagination: true,\n      sortable: true,\n      responsive: true,\n    },\n    params\n  );\n\n  let store,\n    showMoreOrLessBtn,\n    eachWidth,\n    viewPortWidth,\n    container, // container div (d3 selection)\n    table, // table.choropleth div\n    headerCategories,\n    tableHeader, // header div\n    tableRow, // table rows (d3 selection)\n    tBody, // table body div\n    tableHeadCells, // table header cells (d3 selection)\n    transitionDuration = 1000, // how long should the transition take\n    headers = attrs.headers, // headers passed from main.js\n    categoryTitles = null,\n    showNColumnsMobile = 2, // how many columns to show on mobile scrollable horizontally;\n    currentSort = null, // current sort column\n    firstColumnWidth,\n    pageSize;\n\n  const getValue = (d, propName) => {\n    let prop = propName;\n    if (typeof propName === \"function\") {\n      prop = propName(d);\n    }\n    return d[prop];\n  };\n\n  function main() {\n    setDimensions();\n\n    store = new DataStore(attrs.data, pageSize);\n    container = d3.select(attrs.container);\n    currentSort = headers.find((d) => d.order);\n\n    categoryTitles = d3\n      .groups(\n        headers.filter((d) => d.category),\n        (d) => d.category\n      )\n      .map((d, i) => {\n        return {\n          title: d[0],\n          headers: d[1].length,\n          isMainColumn: d[1][0].isMainColumn,\n        };\n      });\n\n    table = container.patternify({\n      tag: \"div\",\n      selector: \"table-grid\",\n    });\n\n    headerCategories = table.patternify({\n      tag: \"div\",\n      selector: \"table-categories\",\n    });\n\n    tableHeader = table.patternify({\n      tag: \"div\",\n      selector: \"table-header\",\n    });\n\n    tBody = table\n      .patternify({\n        tag: \"div\",\n        selector: \"table-body\",\n      })\n      .style(\"position\", \"relative\");\n\n    drawAll();\n  }\n\n  function setDimensions() {\n    const br = getMobileBreakdown();\n\n    // if responsive and pagination are true, results blank columns\n    if (attrs.responsive && !attrs.pagination) {\n      attrs.responsive = false;\n    }\n\n    pageSize = attrs.pagination ? attrs.pageSize[br] : attrs.data.length + 1;\n    showNColumnsMobile = attrs.numOfColumnsMobile[br];\n    firstColumnWidth = attrs.firstColumnWidth[br];\n\n    if (store) {\n      store.pageSize = pageSize;\n    }\n  }\n\n  function drawAll(resize) {\n    if (attrs.pagination) {\n      showMoreOrLessBtn = container\n        .patternify({\n          tag: \"button\",\n          selector: \"show-btn\",\n        })\n        .attr(\"class\", \"show-btn btn\")\n        .text(\"SHOW MORE\")\n        .on(\"click\", function () {\n          if (store.currentData.length >= store.filtered_data.length) {\n            collapse();\n          } else {\n            showMore();\n          }\n        });\n\n      adjustShowBtn();\n    } else {\n      container.selectAll(\".show-btn\").remove();\n    }\n\n    table.classed(\"v-scrollable\", attrs.responsive);\n    tBody.classed(\"h-scrollable\", !attrs.pagination);\n\n    if (categoryTitles.length) {\n      addCategoryTitles();\n    }\n\n    addTableHead(resize);\n    addTableBody();\n\n    if (attrs.pagination) {\n      adjustHeight();\n    }\n\n    if (attrs.responsive) {\n      makeItResponsive();\n    }\n\n    if (attrs.sortable) {\n      if (currentSort) {\n        sortTableBy(currentSort, false);\n      }\n    }\n  }\n\n  function addCategoryTitles() {\n    if (!categoryTitles.some((d) => d.isMainColumn)) {\n      categoryTitles.unshift({\n        title: \"main\",\n        headers: 1,\n        isMainColumn: true,\n        hidden: true,\n      });\n    }\n\n    const catTitle = headerCategories\n      .patternify({\n        tag: \"div\",\n        selector: \"category-title\",\n        data: categoryTitles,\n      })\n      .html((d) => d.title)\n      .classed(\"main-column\", (d) => d.isMainColumn)\n      .style(\"width\", (d) => {\n        if (d.isMainColumn) {\n          return `${firstColumnWidth}px`;\n        }\n        return `calc(((100% - ${firstColumnWidth}px) / ${headers.length - 1}) * ${d.headers})`;\n      })\n      .style(\"visibility\", (d) => {\n        return d.hidden ? \"hidden\" : null;\n      });\n\n    catTitle.patternify({\n      tag: \"div\",\n      selector: \"cat-border\",\n    });\n  }\n\n  function addTableHead(resize) {\n    tableHeadCells = tableHeader\n      .patternify({\n        tag: \"div\",\n        selector: \"table-head\",\n        data: headers,\n      })\n      .attr(\"class\", (d, i) => {\n        return (\n          \"table-head\" +\n          (d.isMainColumn ? \" main-column\" : \"\") +\n          (d.class ? \" \" + d.class : \"\")\n        );\n      })\n      .style(\"width\", getWidth);\n\n    tableHeadCells.each(function (d) {\n      if (resize && d.isMainColumn) {\n        return;\n      }\n\n      if (d.headerTemplate && typeof d.headerTemplate === \"function\") {\n        d.headerTemplate(d).then((html) => {\n          d3.select(this).html(html);\n        });\n      } else {\n        d3.select(this).html(d.name);\n      }\n    });\n\n    // click events for the columns with has sort true\n    tableHeadCells\n      .filter((d) => d.sort)\n      .on(\"click\", (e, d) => {\n        if (d.order == \"asc\") {\n          d.order = \"desc\";\n        } else {\n          d.order = \"asc\";\n        }\n\n        sortTableBy(d);\n      });\n  }\n\n  function addTableBody() {\n    tableRow = tBody\n      .patternify({\n        tag: \"div\",\n        selector: \"table-row\",\n        data: store.currentData,\n      })\n      .style(\"left\", \"0px\")\n      .style(\"top\", function (d, i) {\n        return i * attrs.cellHeight + \"px\";\n      });\n\n    tableRow.each(function (d, i) {\n      const that = d3.select(this);\n\n      const tableData = that\n        .patternify({\n          tag: \"div\",\n          selector: \"table-data\",\n          data: headers,\n        })\n        .attr(\"class\", (d) => {\n          return (\n            \"table-data\" +\n            (d.isMainColumn ? \" main-column\" : \" value-column\") +\n            (d.class ? \" \" + d.class : \"\")\n          );\n        })\n        .style(\"width\", getWidth)\n        .style(\"height\", attrs.cellHeight + \"px\");\n\n      tableData\n        .patternify({\n          tag: \"div\",\n          selector: \"table-data-inner\",\n          data: (m) => [m],\n        })\n        .html((x) => {\n          if (x.cellTemplate && typeof x.cellTemplate === \"function\") {\n            return x.cellTemplate({\n              ...d,\n              value: getValue(d, x.propName),\n            });\n          }\n\n          return getValue(d, x.propName);\n        });\n    });\n  }\n\n  function sortTableBy(d, animate = true) {\n    if (!d.sort) return;\n\n    // first sort data\n    // store.sort((a, b) => d.sort(a, b, d.order));\n\n    // get first N rows and shuffle for transition\n    // data = shuffle(data.slice(0, numOfRows));\n\n    // redraw rows\n    // updateRows();\n\n    // grey out all icons and clear order property for other headers\n    tableHeadCells\n      .filter((d) => d.sort)\n      .each(function (x) {\n        const icon = d3.select(this);\n\n        if (x.id === d.id) {\n          icon.classed(\"active\", true);\n          icon.classed(x.order === \"asc\" ? \"desc\" : \"asc\", false);\n          icon.classed(x.order, true);\n        } else {\n          x.order = null;\n          icon.classed(\"active\", false);\n          icon.classed(\"desc\", false);\n          icon.classed(\"asc\", false);\n        }\n      });\n\n    // sorting table rows\n    tableRow\n      .sort((a, b) => d.sort(a, b, d.order))\n      .transition()\n      .duration(animate ? transitionDuration : 0)\n      .style(\"top\", (_, i) => {\n        return i * attrs.cellHeight + \"px\";\n      });\n\n    currentSort = d;\n  }\n\n  function getWidth(d) {\n    if (d.isMainColumn) {\n      return firstColumnWidth + \"px\";\n    }\n\n    return `calc((100% - ${firstColumnWidth}px) / ${headers.length - 1})`;\n  }\n\n  function adjustHeight() {\n    const tableHeaderHeight = tableHeader.node().getBoundingClientRect().height;\n\n    table.style(\n      \"height\",\n      tableHeaderHeight + 22 + attrs.cellHeight * store.currentData.length + \"px\"\n    );\n  }\n\n  function makeItResponsive() {\n    viewPortWidth = container.node().getBoundingClientRect().width;\n    eachWidth = (viewPortWidth - firstColumnWidth) / showNColumnsMobile;\n\n    const w = Math.max(\n      viewPortWidth,\n      eachWidth * (headers.length - 1) + firstColumnWidth\n    );\n\n    if (getMobileBreakdown() === attrs.mobileBreakdown && w > viewPortWidth) {\n      tBody.style(\"position\", \"static\");\n      table.classed(\"responsive\", true);\n\n      tableRow\n        .style(\"width\", w - firstColumnWidth + \"px\")\n        .style(\"position\", \"static\");\n\n      headerCategories.style(\"width\", w - firstColumnWidth + \"px\");\n\n      headerCategories.selectAll(\".category-title\").style(\"width\", (d, i) => {\n        if (d.isMainColumn) return firstColumnWidth + \"px\";\n        return `calc((100% / ${headers.length - 1}) * ${d.headers})`;\n      });\n\n      tableHeader.style(\"width\", w - firstColumnWidth + \"px\");\n\n      table\n        .selectAll(\".main-column\")\n        .style(\"position\", \"absolute\")\n        .style(\"margin-left\", -firstColumnWidth + \"px\");\n\n      table.style(\"margin-left\", firstColumnWidth + \"px\");\n\n      table\n        .selectAll(\".value-column\")\n        .style(\"width\", `calc(100% / ${headers.length - 1})`);\n\n      table.selectAll(\".table-head\").style(\"width\", (d, i) => {\n        if (d.isMainColumn) return firstColumnWidth + \"px\";\n        return `calc(100% / ${headers.length - 1})`;\n      });\n    } else {\n      table.classed(\"responsive\", false);\n      table\n        .selectAll(\".main-column\")\n        .style(\"position\", null)\n        .style(\"margin-left\", null);\n\n      table.selectAll(\".table-head\").style(\"width\", getWidth);\n\n      table\n        .selectAll(\".table-data\")\n        .style(\"width\", getWidth)\n        .style(\"height\", attrs.cellHeight + \"px\");\n\n      tBody.style(\"position\", \"relative\");\n      table.style(\"margin-left\", null);\n\n      tableRow\n        .style(\"width\", null)\n        .style(\"margin-left\", null)\n        .style(\"position\", null);\n\n      tableHeader.style(\"width\", null).style(\"margin-left\", null);\n\n      headerCategories.style(\"width\", null);\n\n      headerCategories.selectAll(\".category-title\").style(\"width\", (d) => {\n        if (d.isMainColumn) {\n          return `${firstColumnWidth}px`;\n        }\n        return `calc(((100% - ${firstColumnWidth}px) / ${\n          headers.length - 1\n        }) * ${d.headers})`;\n      });\n    }\n  }\n\n  function adjustShowBtn() {\n    if (store.onlyOnePage) {\n      showMoreOrLessBtn.style(\"display\", \"none\");\n    } else {\n      showMoreOrLessBtn.style(\"display\", null);\n\n      if (store.currentData.length >= store.filtered_data.length) {\n        showMoreOrLessBtn.text(\"SHOW LESS\");\n      } else {\n        showMoreOrLessBtn.text(\"SHOW MORE\");\n      }\n    }\n  }\n\n  function updateRows() {\n    table.classed(\"v-scrollable\", attrs.responsive);\n    tBody.classed(\"h-scrollable\", !attrs.pagination);\n\n    addTableBody();\n\n    if (attrs.pagination) {\n      adjustHeight();\n    }\n\n    if (attrs.responsive) {\n      makeItResponsive();\n    }\n  }\n\n  function showMore() {\n    store.nextPage();\n    adjustShowBtn();\n    updateRows();\n\n    if (currentSort && attrs.sortable) {\n      sortTableBy(currentSort, false);\n    }\n  }\n\n  function collapse() {\n    store.collapse();\n    adjustShowBtn();\n    updateRows();\n\n    if (currentSort && attrs.sortable) {\n      sortTableBy(currentSort, false);\n    }\n  }\n\n  main.filter = function (filterFunction) {\n    store.filter(filterFunction);\n\n    adjustShowBtn();\n    addTableBody();\n\n    if (attrs.pagination) {\n      adjustHeight();\n    }\n\n    if (currentSort && attrs.sortable) {\n      sortTableBy(currentSort, false);\n    }\n  };\n\n  main.render = function () {\n    main();\n\n    let tableWidth = window.innerWidth;\n\n    // window resize\n    d3.select(window).on(\"resize.\" + attrs.id, function () {\n      \n      if (tableWidth !== window.innerWidth) {\n        setDimensions();\n        drawAll(true);\n      }\n\n      tableWidth = window.innerWidth;\n    });\n    return main;\n  };\n\n  return main;\n}\n\nexport function init_patternify() {\n  d3.selection.prototype.patternify = function (params) {\n    var container = this;\n    var selector = params.selector;\n    var elementTag = params.tag;\n    var data = params.data || [selector];\n\n    // Pattern in action\n    var selection = container.selectAll(\".\" + selector).data(data, (d, i) => {\n      if (typeof d === \"object\") {\n        if (d.id) {\n          return d.id;\n        }\n      }\n      return i;\n    });\n    selection.exit().remove();\n    selection = selection.enter().append(elementTag).merge(selection);\n    selection.attr(\"class\", selector);\n    return selection;\n  };\n}\n\nexport default Table;"],"names":["DataStore","constructor","data","pageSize","all_data","slice","filtered_data","rows_shown","page_size","filter","fn","this","currentData","sort","a","b","nextPage","collapse","size","d3","selection","select","groups","getMobileBreakdown","viewport","window","innerWidth","params","prototype","patternify","container","selector","elementTag","tag","selectAll","d","i","id","exit","remove","enter","append","merge","attr","attrs","Object","assign","Math","floor","random","headers","cellHeight","firstColumnWidth","xs","sm","md","lg","rest","numOfColumnsMobile","mobileBreakdown","pagination","sortable","responsive","store","showMoreOrLessBtn","eachWidth","viewPortWidth","table","headerCategories","tableHeader","tableRow","tBody","tableHeadCells","categoryTitles","showNColumnsMobile","currentSort","getValue","propName","prop","main","setDimensions","find","order","category","map","title","length","isMainColumn","style","drawAll","br","resize","text","on","adjustShowBtn","updateRows","sortTableBy","classed","some","unshift","hidden","html","addCategoryTitles","class","getWidth","each","headerTemplate","then","name","e","addTableHead","addTableBody","adjustHeight","makeItResponsive","m","x","cellTemplate","value","animate","icon","transition","duration","_","tableHeaderHeight","node","getBoundingClientRect","height","width","w","max","onlyOnePage","filterFunction","render","tableWidth"],"mappings":"mUAAA,MAAMA,EACJC,YAAYC,EAAMC,EAAW,SACtBC,SAAWF,EAAKG,aAChBC,cAAgBJ,EAAKG,aAErBE,WAAaJ,OACbK,UAAYL,EAGnBM,OAAOC,eAEAJ,cAAgBK,KAAKP,SAASK,OAAOC,GAD5B,MAAM,IAEbC,KAAKC,YAGdC,KAAKH,eACEJ,cAAcO,MAAK,CAACC,EAAGC,IACnBL,EAAGI,EAAGC,KAERJ,KAAKC,YAGdI,uBACOT,YAAcI,KAAKH,UACjBG,KAAKC,YAGdK,uBACOV,WAAaI,KAAKH,UAChBG,KAAKC,yBAGDM,QACNV,UAAYU,OACZX,WAAaW,2BAIXP,KAAKL,cAAcD,MAAM,EAAGM,KAAKJ,qCAIjCI,KAAKL,eAAiBK,KAAKH,WCtCtC,MAAMW,EAAK,WAACC,mBAAWC,gBAAQC,UAEzBC,EAAqB,WACnBC,EAAWC,OAAOC,kBAEpBF,GAAY,IACP,KACEA,GAAY,IACd,KACEA,GAAY,IACd,KACEA,GAAY,KACd,KAEA,8BAIX,SAAeG,GAghBbR,EAAGC,UAAUQ,UAAUC,WAAa,SAAUF,OACxCG,EAAYnB,KACZoB,EAAWJ,EAAOI,SAClBC,EAAaL,EAAOM,IACpB/B,EAAOyB,EAAOzB,MAAQ,CAAC6B,GAGvBX,EAAYU,EAAUI,UAAU,IAAMH,GAAU7B,KAAKA,GAAM,CAACiC,EAAGC,IAChD,iBAAND,GACLA,EAAEE,GACGF,EAAEE,GAGND,WAEThB,EAAUkB,OAAOC,UACjBnB,EAAYA,EAAUoB,QAAQC,OAAOT,GAAYU,MAAMtB,IAC7CuB,KAAK,QAASZ,GACjBX,SA/hBHwB,EAAQC,OAAOC,OACnB,CACET,GAAIU,KAAKC,MAAsB,IAAhBD,KAAKE,UACpBnB,UAAW,OACX5B,KAAM,GACNgD,QAAS,GACTC,WAAY,GACZC,iBAAkB,CAEhBC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,KAAM,KAERtD,SAAU,CAERkD,GAAI,EACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,KAAM,IAERC,mBAAoB,CAClBL,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,GACJC,KAAM,IAERE,gBAAiB,KACjBC,YAAY,EACZC,UAAU,EACVC,YAAY,GAEdnC,OAGEoC,EACFC,EACAC,EACAC,EACApC,EACAqC,EACAC,EACAC,EACAC,EACAC,EACAC,EAMApB,EACAjD,EALA+C,EAAUN,EAAMM,QAChBuB,EAAiB,KACjBC,EAAqB,EACrBC,EAAc,WAIVC,EAAW,CAACzC,EAAG0C,SACfC,EAAOD,QACa,mBAAbA,IACTC,EAAOD,EAAS1C,IAEXA,EAAE2C,aAGFC,IACPC,IAEAjB,EAAQ,IAAI/D,EAAU4C,EAAM1C,KAAMC,GAClC2B,EAAYX,EAAGE,OAAOuB,EAAMd,WAC5B6C,EAAczB,EAAQ+B,MAAM9C,GAAMA,EAAE+C,QAEpCT,EAAiBtD,EACdG,OACC4B,EAAQzC,QAAQ0B,GAAMA,EAAEgD,YACvBhD,GAAMA,EAAEgD,WAEVC,KAAI,CAACjD,EAAGC,KACA,CACLiD,MAAOlD,EAAE,GACTe,QAASf,EAAE,GAAGmD,OACdC,aAAcpD,EAAE,GAAG,GAAGoD,iBAI5BpB,EAAQrC,EAAUD,WAAW,CAC3BI,IAAK,MACLF,SAAU,eAGZqC,EAAmBD,EAAMtC,WAAW,CAClCI,IAAK,MACLF,SAAU,qBAGZsC,EAAcF,EAAMtC,WAAW,CAC7BI,IAAK,MACLF,SAAU,iBAGZwC,EAAQJ,EACLtC,WAAW,CACVI,IAAK,MACLF,SAAU,eAEXyD,MAAM,WAAY,YAErBC,aAGOT,UACDU,EAAKnE,IAGPqB,EAAMkB,aAAelB,EAAMgB,aAC7BhB,EAAMkB,YAAa,GAGrB3D,EAAWyC,EAAMgB,WAAahB,EAAMzC,SAASuF,GAAM9C,EAAM1C,KAAKoF,OAAS,EACvEZ,EAAqB9B,EAAMc,mBAAmBgC,GAC9CtC,EAAmBR,EAAMQ,iBAAiBsC,GAEtC3B,IACFA,EAAM5D,SAAWA,YAIZsF,EAAQE,GACX/C,EAAMgB,YACRI,EAAoBlC,EACjBD,WAAW,CACVI,IAAK,SACLF,SAAU,aAEXY,KAAK,QAAS,gBACdiD,KAAK,aACLC,GAAG,SAAS,WACP9B,EAAMnD,YAAY0E,QAAUvB,EAAMzD,cAAcgF,QAsV1DvB,EAAM9C,WACN6E,IACAC,IAEIpB,GAAe/B,EAAMiB,UACvBmC,EAAYrB,GAAa,KAf3BZ,EAAM/C,WACN8E,IACAC,IAEIpB,GAAe/B,EAAMiB,UACvBmC,EAAYrB,GAAa,OA1UzBmB,KAEAhE,EAAUI,UAAU,aAAaK,SAGnC4B,EAAM8B,QAAQ,eAAgBrD,EAAMkB,YACpCS,EAAM0B,QAAQ,gBAAiBrD,EAAMgB,YAEjCa,EAAea,mBAuBdb,EAAeyB,MAAM/D,GAAMA,EAAEoD,gBAChCd,EAAe0B,QAAQ,CACrBd,MAAO,OACPnC,QAAS,EACTqC,cAAc,EACda,QAAQ,IAIKhC,EACdvC,WAAW,CACVI,IAAK,MACLF,SAAU,iBACV7B,KAAMuE,IAEP4B,MAAMlE,GAAMA,EAAEkD,QACdY,QAAQ,eAAgB9D,GAAMA,EAAEoD,eAChCC,MAAM,SAAUrD,GACXA,EAAEoD,aACI,GAAEnC,MAEJ,iBAAgBA,UAAyBF,EAAQoC,OAAS,QAAQnD,EAAEe,aAE7EsC,MAAM,cAAerD,GACbA,EAAEiE,OAAS,SAAW,OAGxBvE,WAAW,CAClBI,IAAK,MACLF,SAAU,eAnDVuE,YAuDkBX,GACpBnB,EAAiBH,EACdxC,WAAW,CACVI,IAAK,MACLF,SAAU,aACV7B,KAAMgD,IAEPP,KAAK,SAAS,CAACR,EAAGC,IAEf,cACCD,EAAEoD,aAAe,eAAiB,KAClCpD,EAAEoE,MAAQ,IAAMpE,EAAEoE,MAAQ,MAG9Bf,MAAM,QAASgB,GAElBhC,EAAeiC,MAAK,SAAUtE,GACxBwD,GAAUxD,EAAEoD,eAIZpD,EAAEuE,gBAA8C,mBAArBvE,EAAEuE,eAC/BvE,EAAEuE,eAAevE,GAAGwE,MAAMN,IACxBlF,EAAGE,OAAOV,MAAM0F,KAAKA,MAGvBlF,EAAGE,OAAOV,MAAM0F,KAAKlE,EAAEyE,UAK3BpC,EACG/D,QAAQ0B,GAAMA,EAAEtB,OAChBgF,GAAG,SAAS,CAACgB,EAAG1E,KACA,OAAXA,EAAE+C,MACJ/C,EAAE+C,MAAQ,OAEV/C,EAAE+C,MAAQ,MAGZc,EAAY7D,MA5FhB2E,CAAanB,GACboB,IAEInE,EAAMgB,YACRoD,IAGEpE,EAAMkB,YACRmD,IAGErE,EAAMiB,UACJc,GACFqB,EAAYrB,GAAa,YAmFtBoC,IACPzC,EAAWC,EACR1C,WAAW,CACVI,IAAK,MACLF,SAAU,YACV7B,KAAM6D,EAAMnD,cAEb4E,MAAM,OAAQ,OACdA,MAAM,OAAO,SAAUrD,EAAGC,UAClBA,EAAIQ,EAAMO,WAAa,QAGlCmB,EAASmC,MAAK,SAAUtE,EAAGC,GACZjB,EAAGE,OAAOV,MAGpBkB,WAAW,CACVI,IAAK,MACLF,SAAU,aACV7B,KAAMgD,IAEPP,KAAK,SAAUR,GAEZ,cACCA,EAAEoD,aAAe,eAAiB,kBAClCpD,EAAEoE,MAAQ,IAAMpE,EAAEoE,MAAQ,MAG9Bf,MAAM,QAASgB,GACfhB,MAAM,SAAU5C,EAAMO,WAAa,MAGnCtB,WAAW,CACVI,IAAK,MACLF,SAAU,mBACV7B,KAAOgH,GAAM,CAACA,KAEfb,MAAMc,GACDA,EAAEC,cAA0C,mBAAnBD,EAAEC,aACtBD,EAAEC,aAAa,IACjBjF,EACHkF,MAAOzC,EAASzC,EAAGgF,EAAEtC,YAIlBD,EAASzC,EAAGgF,EAAEtC,wBAKpBmB,EAAY7D,EAAGmF,GAAU,GAC3BnF,EAAEtB,OAYP2D,EACG/D,QAAQ0B,GAAMA,EAAEtB,OAChB4F,MAAK,SAAUU,SACRI,EAAOpG,EAAGE,OAAOV,MAEnBwG,EAAE9E,KAAOF,EAAEE,IACbkF,EAAKtB,QAAQ,UAAU,GACvBsB,EAAKtB,QAAoB,QAAZkB,EAAEjC,MAAkB,OAAS,OAAO,GACjDqC,EAAKtB,QAAQkB,EAAEjC,OAAO,KAEtBiC,EAAEjC,MAAQ,KACVqC,EAAKtB,QAAQ,UAAU,GACvBsB,EAAKtB,QAAQ,QAAQ,GACrBsB,EAAKtB,QAAQ,OAAO,OAK1B3B,EACGzD,MAAK,CAACC,EAAGC,IAAMoB,EAAEtB,KAAKC,EAAGC,EAAGoB,EAAE+C,SAC9BsC,aACAC,SAASH,EA/RS,IA+RsB,GACxC9B,MAAM,OAAO,CAACkC,EAAGtF,IACTA,EAAIQ,EAAMO,WAAa,OAGlCwB,EAAcxC,YAGPqE,EAASrE,UACZA,EAAEoD,aACGnC,EAAmB,KAGpB,gBAAeA,UAAyBF,EAAQoC,OAAS,cAG1D0B,UACDW,EAAoBtD,EAAYuD,OAAOC,wBAAwBC,OAErE3D,EAAMqB,MACJ,SACAmC,EAAoB,GAAK/E,EAAMO,WAAaY,EAAMnD,YAAY0E,OAAS,eAIlE2B,IACP/C,EAAgBpC,EAAU8F,OAAOC,wBAAwBE,MACzD9D,GAAaC,EAAgBd,GAAoBsB,QAE3CsD,EAAIjF,KAAKkF,IACb/D,EACAD,GAAaf,EAAQoC,OAAS,GAAKlC,GAGjC7B,MAAyBqB,EAAMe,iBAAmBqE,EAAI9D,GACxDK,EAAMiB,MAAM,WAAY,UACxBrB,EAAM8B,QAAQ,cAAc,GAE5B3B,EACGkB,MAAM,QAASwC,EAAI5E,EAAmB,MACtCoC,MAAM,WAAY,UAErBpB,EAAiBoB,MAAM,QAASwC,EAAI5E,EAAmB,MAEvDgB,EAAiBlC,UAAU,mBAAmBsD,MAAM,SAAS,CAACrD,EAAGC,IAC3DD,EAAEoD,aAAqBnC,EAAmB,KACtC,gBAAeF,EAAQoC,OAAS,QAAQnD,EAAEe,aAGpDmB,EAAYmB,MAAM,QAASwC,EAAI5E,EAAmB,MAElDe,EACGjC,UAAU,gBACVsD,MAAM,WAAY,YAClBA,MAAM,eAAgBpC,EAAmB,MAE5Ce,EAAMqB,MAAM,cAAepC,EAAmB,MAE9Ce,EACGjC,UAAU,iBACVsD,MAAM,QAAU,eAActC,EAAQoC,OAAS,MAElDnB,EAAMjC,UAAU,eAAesD,MAAM,SAAS,CAACrD,EAAGC,IAC5CD,EAAEoD,aAAqBnC,EAAmB,KACtC,eAAcF,EAAQoC,OAAS,SAGzCnB,EAAM8B,QAAQ,cAAc,GAC5B9B,EACGjC,UAAU,gBACVsD,MAAM,WAAY,MAClBA,MAAM,cAAe,MAExBrB,EAAMjC,UAAU,eAAesD,MAAM,QAASgB,GAE9CrC,EACGjC,UAAU,eACVsD,MAAM,QAASgB,GACfhB,MAAM,SAAU5C,EAAMO,WAAa,MAEtCoB,EAAMiB,MAAM,WAAY,YACxBrB,EAAMqB,MAAM,cAAe,MAE3BlB,EACGkB,MAAM,QAAS,MACfA,MAAM,cAAe,MACrBA,MAAM,WAAY,MAErBnB,EAAYmB,MAAM,QAAS,MAAMA,MAAM,cAAe,MAEtDpB,EAAiBoB,MAAM,QAAS,MAEhCpB,EAAiBlC,UAAU,mBAAmBsD,MAAM,SAAUrD,GACxDA,EAAEoD,aACI,GAAEnC,MAEJ,iBAAgBA,UACtBF,EAAQoC,OAAS,QACZnD,EAAEe,uBAKN4C,IACH/B,EAAMmE,YACRlE,EAAkBwB,MAAM,UAAW,SAEnCxB,EAAkBwB,MAAM,UAAW,MAE/BzB,EAAMnD,YAAY0E,QAAUvB,EAAMzD,cAAcgF,OAClDtB,EAAkB4B,KAAK,aAEvB5B,EAAkB4B,KAAK,uBAKpBG,IACP5B,EAAM8B,QAAQ,eAAgBrD,EAAMkB,YACpCS,EAAM0B,QAAQ,gBAAiBrD,EAAMgB,YAErCmD,IAEInE,EAAMgB,YACRoD,IAGEpE,EAAMkB,YACRmD,WAwBJlC,EAAKtE,OAAS,SAAU0H,GACtBpE,EAAMtD,OAAO0H,GAEbrC,IACAiB,IAEInE,EAAMgB,YACRoD,IAGErC,GAAe/B,EAAMiB,UACvBmC,EAAYrB,GAAa,IAI7BI,EAAKqD,OAAS,WACZrD,QAEIsD,EAAa5G,OAAOC,kBAGxBP,EAAGE,OAAOI,QAAQoE,GAAG,UAAYjD,EAAMP,IAAI,WAErCgG,IAAe5G,OAAOC,aACxBsD,IACAS,GAAQ,IAGV4C,EAAa5G,OAAOC,cAEfqD,GAGFA"}